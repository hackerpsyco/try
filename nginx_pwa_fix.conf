# PWA FIX - Add service worker and manifest at root level
# Add these location blocks to your Nginx server configuration

# Service Worker - Must be at root level for proper scope
location = /service-worker.js {
    alias /home/ubuntu/try/static/service-worker.js;
    add_header Cache-Control "public, max-age=3600";
    add_header Service-Worker-Allowed "/";
    access_log off;
}

# Manifest - Must be at root level
location = /manifest.json {
    alias /home/ubuntu/try/static/manifest.json;
    add_header Content-Type "application/manifest+json";
    add_header Cache-Control "public, max-age=3600";
    access_log off;
}

# Offline page
location = /offline/ {
    proxy_pass https://clas.wazireducationsociety.org/offline/;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
}

# Icons directory for PWA
location /static/icons/ {
    alias /home/ubuntu/try/static/icons/;
    expires 30d;
    add_header Cache-Control "public, immutable";
    access_log off;
}

# Images directory
location /static/images/ {
    alias /home/ubuntu/try/static/images/;
    expires 30d;
    add_header Cache-Control "public, immutable";
    access_log off;
}
